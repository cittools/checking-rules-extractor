<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<LINK REL="stylesheet" HREF="book.css" TYPE="text/css">
<TITLE>
Do not use more than one volatile in one expression
</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF>
<STRONG>
Do not use more than one volatile in one expression [MISRA2004-12_2_f-3]
</STRONG>
<BR><BR>
<STRONG>
DESCRIPTION
</STRONG>
<PRE>

"The volatile type qualifier is provided in C to denote objects whose value can 
change independently of the execution of the program (for example an input 
register). If an object of volatile qualified type is accessed this may change 
its value. C compilers will not optimise out reads of a volatile. In addition, 
as far as a C program is concerned, a read of a volatile has a side effect 
(changing the value of the volatile). It will usually be necessary to access 
volatile data as part of an expression, which then means there may be dependence
on order of evaluation. Where possible though it is recommended that volatiles 
only be accessed in simple assignment statements."
The rule reports a violation if in one expression is used more than one volatile.
See also: MISRA2004-12_2_b



</PRE>
<STRONG>
SINCE
</STRONG>
<PRE>

v7.0



</PRE>
<STRONG>
NOTES
</STRONG>
<PRE>

Rule does not report violation if in a function call are used as arguments
more than one volatile. In this case should be used rule MISRA2004-12_2_b.
    void goo(int, int);
    void foo()
    {
        volatile int v;
        goo(v, v);  // Violation - MISRA2004-12_2_b
    }



</PRE>
<STRONG>
BENEFITS
</STRONG>
<PRE>

Rule prevents evaluation of expression dependent on compiler version.



</PRE>
<STRONG>
EXAMPLE
</STRONG>
<PRE>

void foo( )
{
    volatile int x;
    int y;
    y = x * x;  // Violation
}



</PRE>
<STRONG>
REPAIR
</STRONG>
<PRE>

void foo( )
{
    volatile int x;
    int y;
    y = x;      // OK
    y = y * y;
}



</PRE>
<STRONG>
REFERENCES
</STRONG>
<PRE>

1. MISRA-C:2004 Guidelines for the use of the C language in critical systems
   Chapter 6, Section 12

2. Origin: Misra Guidelines - Rule 46

3. MISRA C++:2008 - Guidelines for the use of the C++ language in critical
   systems, Chapter 6, Section 5, Rule 5-0-1

</PRE>
</BODY>
</HTML>
