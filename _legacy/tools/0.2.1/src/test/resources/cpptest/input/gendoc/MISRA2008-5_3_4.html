<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<LINK REL="stylesheet" HREF="book.css" TYPE="text/css">
<TITLE>
Evaluation of the operand to the sizeof operator shall not contain side effects
</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF>
<STRONG>
Evaluation of the operand to the sizeof operator shall not contain side effects [MISRA2008-5_3_4-3]
</STRONG>
<BR><BR>
<STRONG>
DESCRIPTION
</STRONG>
<PRE>

"A possible programming error in C is to apply the sizeof operator to an 
expression and expect the expression to be evaluated. However the expression is 
not evaluated: sizeof only acts on the type of the expression. To avoid this 
error, sizeof shall not be used on expressions that contain side effects, as the
side effects will not occur."



</PRE>
<STRONG>
NOTES
</STRONG>
<PRE>

All functions calls are recognized as expressions with side effect.



</PRE>
<STRONG>
BENEFITS
</STRONG>
<PRE>

Prevents error that are caused by believing that operand of sizeof is evaluated



</PRE>
<STRONG>
EXAMPLE
</STRONG>
<PRE>

void foo( ) 
{
    int i;
    int j;
    j = sizeof( i = 1234 ); // Violation
}



</PRE>
<STRONG>
REPAIR
</STRONG>
<PRE>

void foo( )
{
    int i;
    int j;
    i = 1234;
    j = sizeof( i );        // OK
}



</PRE>
<STRONG>
REFERENCES
</STRONG>
<PRE>

1. MISRA-C:2004 Guidelines for the use of the C language in critical systems
    Chapter 6, Section 12

2. Origin: Misra Guidelines - Rule 40

3. JOINT STRIKE FIGHTER, AIR VEHICLE, C++ CODING STANDARDS
   Chapter 4.21 Operators, AV Rule 166

4. MISRA C++:2008 - Guidelines for the use of the C++ language in critical
   systems, Chapter 6, Section 5, Rule 5-3-4

</PRE>
</BODY>
</HTML>
