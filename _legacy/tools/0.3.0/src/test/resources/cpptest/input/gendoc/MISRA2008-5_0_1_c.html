<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<LINK REL="stylesheet" HREF="book.css" TYPE="text/css">
<TITLE>
The value of an expression shall be the same under any order of evaluation that the standard permits
</TITLE>
</HEAD>
<BODY BGCOLOR=#FFFFFF>
<STRONG>
The value of an expression shall be the same under any order of evaluation that the standard permits [MISRA2008-5_0_1_c-3]
</STRONG>
<BR><BR>
<STRONG>
DESCRIPTION
</STRONG>
<PRE>

"Apart from a few operators (notably the function call operator (), &amp;&amp;, ||, ?: 
and , (comma)) the order in which sub-expressions are evaluated is unspecified 
and can vary. This means that no reliance can be placed on the order of 
evaluation of sub-expressions, and in particular no reliance can be placed on 
the order in which side effects occur. Those points in the evaluation of an 
expression at which all previous side effects can be guaranteed to have taken 
place are called “sequence points”. Sequence points and side effects are 
described in sections 5.1.2.3, 6.3 and 6.6 of ISO 9899:1990 [2].
Note that the order of evaluation problem is not solved by the use of 
parentheses, as this is not a precedence issue."
"If a function is called via a function pointer there shall be no dependence on 
the order in which function designator and function arguments are evaluated.
p-&gt;task_start_fn(p++);"



</PRE>
<STRONG>
BENEFITS
</STRONG>
<PRE>

Rule prevents evaluation of expression dependent on compiler version.



</PRE>
<STRONG>
EXAMPLE
</STRONG>
<PRE>

struct S {
    void (*task_start_fn)( struct S* );
};

void foo() {
    struct S* p;
    p-&gt;task_start_fn( p++ );   // Violation
}



</PRE>
<STRONG>
REPAIR
</STRONG>
<PRE>

struct S {
    void (*task_start_fn)( struct S* );
};

void foo() {
    struct S* p;
    p-&gt;task_start_fn( p );     // OK
    p++;
}



</PRE>
<STRONG>
REFERENCES
</STRONG>
<PRE>

1. MISRA-C:2004 Guidelines for the use of the C language in critical systems
    Chapter 6, Section 12

2. Origin: Misra Guidelines - Rule 46

3. MISRA C++:2008 - Guidelines for the use of the C++ language in critical
   systems, Chapter 6, Section 5, Rule 5-0-1

</PRE>
</BODY>
</HTML>
